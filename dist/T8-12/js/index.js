!function(e){function t(i){if(a[i])return a[i].exports;var n=a[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="/dist/",t(0)}([function(e,t,a){e.exports=a(1)},function(e,t,a){"use strict";a(2),a(4),$(function(){var e=parent.window.h5SyncActions&&parent.window.h5SyncActions.isSync;console.info("当前显示环境处在"+(e?"":" 非")+"同步状态！！！"),configData.defaultValue.bgImage&&$(".container").css({backgroundImage:"url("+configData.defaultValue.bgImage+")"}),configData.bg&&$(".container").css({backgroundImage:"url("+configData.bg+")"}),configData.defaultValue.bgColor&&$(".container").css({backgroundColor:configData.defaultValue.bgColor}),configData.bgColor&&$(".container").css({backgroundColor:configData.bgColor});var t=$(".title").is(":hidden");t&&$(".content-wrap").css("height","calc(100% - .76rem)");var a,i,n=$(".content-wrap"),s=configData.source,c='\n                <div class="item card-img" data-id="{{i}}" data-type="{{type}}" data-audio ="{{audio}}"  data-text="{{text}}" data-img="{{img}}" data-syncactions="card-img-{{i}}">\n                  <img src="{{img}}"/>\n                </div>\n              ',r='\n                <div class="item card-text {{bigText}}" data-id="{{i}}"  data-type="{{type}}" data-audio ="{{audio}}" data-text="{{text}}"   data-syncactions="card-text-{{i}}">\n                  <span class="text">{{text}}</span>\n                  <div class="audio-wrap"  data-syncactions="audio-wrap-{{i}}">\n                    <img src="./image/btn-audio.png"/>\n                    <audio src="{{audio}}"></audio>\n                  </div>\n                </div>\n              ',o='<li class="line-wrap">{{cards}}</li>';a=i=o;var d=function(e){var t=[];return t.push({id:e.id,type:"img",img:e.img,text:"",audio:e.audio}),t.push({id:e.id,type:"text",img:"",text:e.text,audio:e.audio}),t},l=[];s.items.forEach(function(e){l=l.concat(d(e))}),console.log("拆分后数组内容如下："),console.log("按打乱算法打乱如下：");var u=0;l=l.sort(function(){return Math.pow(-1,u++)});var g=function(e){var t="";return e.forEach(function(e){var a="";"img"==e.type?t+=c.replace(/{{i}}/g,e.id).replace(/{{type}}/g,e.type).replace(/{{img}}/g,e.img).replace(/{{audio}}/g,e.audio).replace(/{{text}}/g,e.text):(e.text.length<=7&&(a="bigText"),t+=r.replace(/{{i}}/g,e.id).replace(/{{bigText}}/g,a).replace(/{{type}}/g,e.type).replace(/{{text}}/g,e.text).replace(/{{audio}}/g,e.audio))}),t},p="",h="",f="";switch(s.items.length){case 2:case 3:p=a.replace(/{{cards}}/,""),h=i.replace(/{{cards}}/,g(l)),f=o.replace(/{{cards}}/,""),$(".content-wrap").css({height:"calc(100% - 4.32rem)"});break;case 4:p=a.replace(/{{cards}}/,g(l.slice(0,4))),h=i.replace(/{{cards}}/,g(l.slice(4))),f=o.replace(/{{cards}}/,""),$(".content-wrap").css({height:"calc(100% - 3.32rem)"});break;case 5:p=a.replace(/{{cards}}/,g(l.slice(0,4))),h=i.replace(/{{cards}}/,g(l.slice(4,8))),f=o.replace(/{{cards}}/,g(l.slice(8)));break;case 6:p=a.replace(/{{cards}}/,g(l.slice(0,6))),h=i.replace(/{{cards}}/,g(l.slice(6))),f=o.replace(/{{cards}}/,""),$(".content-wrap").css({height:"calc(100% - 4.32rem)"});break;case 7:case 8:case 9:p=a.replace(/{{cards}}/,g(l.slice(0,6))),h=i.replace(/{{cards}}/,g(l.slice(6,12))),f=o.replace(/{{cards}}/,g(l.slice(12)))}n.html(""),n.append(p),n.append(h),n.append(f),$(".audio-wrap").each(function(e,t){""==$(t).find("audio").attr("src")&&$(t).hide()});var m='\n        <div class="mask mask-answer">\n          <div class="wrap-card-answer">\n          <div class="card-answer">\n            <div class="card-img">\n              <img src="{{img}}"/>\n            </div>\n            <span class="text">{{text}}</span>\n          </div>\n          <div class="audio-wrap"  data-syncactions="audio-wrap-{{i}}">\n            <img src="./image/volumeBtn.gif"/>\n            <audio src="{{audio}}"></audio>\n          </div>\n          </div>\n        </div>\n        ',v=!0,y=!0,w=!0;$(".item").on("click",".audio-wrap",function(t){if(v){if(v=!1,!e)return void $(this).trigger("syncAudioWrapClick");if("tea"!=window.frameElement.getAttribute("user_type"))return void $(this).trigger("syncAudioWrapClick");SDK.bindSyncEvt({index:$(t.currentTarget).data("syncactions"),method:"event",syncName:"syncAudioWrapClick",funcType:"audio"})}}),$(".item").on("syncAudioWrapClick",".audio-wrap",function(){var e=null;e=$(this).find("audio").get(0);var t=$(this).find("img");return e?e.play():"",0!=t.length&&(t.attr("src",$(this).find("img").attr("src").replace(".png",".gif")),e.onended=function(){t.attr("src",$(this).find("img").attr("src").replace(".gif",".png"))}.bind(this)),$(this).find("audio").get(0).play(),SDK.setEventLock(),v=!0,!1}),$(".item").on("mouseenter",".audio-wrap",function(t){if(y){if(y=!1,!e)return void $(this).trigger("syncAudioWrapMouseenter");SDK.bindSyncEvt({index:$(t.currentTarget).data("syncactions"),method:"event",syncName:"syncAudioWrapMouseenter"})}}),$(".item").on("syncAudioWrapMouseenter",".audio-wrap",function(){return $(this).css("transform","translate(-50%,-50%) scale(1.1)"),SDK.setEventLock(),y=!0,!1}),$(".item").on("mouseleave",".audio-wrap",function(t){if(w){if(w=!1,!e)return void $(this).trigger("syncAudioWrapMouseleave");SDK.bindSyncEvt({index:$(t.currentTarget).data("syncactions"),method:"event",syncName:"syncAudioWrapMouseleave"})}}),$(".item").on("syncAudioWrapMouseleave",".audio-wrap",function(){return $(this).css("transform","translate(-50%,-50%) scale(1)"),SDK.setEventLock(),w=!0,!1});var x=!0;n.on("click",".item",function(t){if(console.log("========================点击啦========"),t.stopPropagation(),x){if(x=!1,!e)return void $(this).trigger("syncItemClick");"stu"==window.frameElement.getAttribute("user_type")&&SDK.bindSyncEvt({sendUser:"",receiveUser:"",index:$(t.currentTarget).data("syncactions"),eventType:"click",method:"event",syncName:"syncItemClick"})}});var b=null,S=null;n.on("syncItemClick",".item",function(t,a){console.log("========================同步点击啦========");var i=$(this),c=i.data("type"),r=(i.data("id"),"img"==c?i.data("img"):""),o=i.data("audio"),d="text"==c?i.data("text"):"";if(i.hasClass("active"))return SDK.setEventLock(),void(x=!0);if(console.log("====firstCard===========",b),b){var l=b;b=null,i.data("id")==l.data("id")?(i.addClass("active"),$(this).queue(function(){if(S=m.replace(/{{img}}/g,""==r?l.data("img"):r).replace(/{{audio}}/g,o).replace(/{{text}}/g,""==d?l.data("text"):d),S=$(S).appendTo(n),o)if(e){var t=$(window.frameElement).attr("user_id"),a=SDK.getClassConf().user.id;t==a&&(console.log("=======当前不是cache-frame========学生自己的frame"),S.find("audio").get(0).play())}else S.find("audio").get(0).play();else S.find(".audio-wrap").hide();$(this).dequeue()}).delay(2500).queue(function(){$(".mask-answer").fadeOut(300),$(this).dequeue()}).delay(100).queue(function(){l.css("visibility","hidden"),i.css("visibility","hidden"),l.attr("pass",!0),i.attr("pass",!0),$(this).dequeue()}).delay(100).queue(function(){S.remove(),$(this).dequeue(),$(".item[pass=true]").length==2*s.items.length&&(console.log("全部消除啦！发送数据！！！"),e&&SDK.bindSyncResultEvt({sendUser:a.data[0].value.sendUser,receiveUser:a.data[0].value.receiveUser,sendUserInfo:a.data[0].value.sendUserInfo,index:$("#container").data("syncresult"),resultData:{isRight:!0},syncName:"teaShowResult",starSend:a.data[0].value.starSend})),SDK.setEventLock(),x=!0})):(l.removeClass("active"),i.addClass("error shake"),l.addClass("error shake"),$(this).delay(500).queue(function(){l.removeClass("shake"),i.removeClass("shake"),$(this).dequeue()}).delay(0).queue(function(){l.removeClass("error"),i.removeClass("error"),$(this).dequeue()}).delay(100).queue(function(){l=null,$(this).dequeue(),SDK.setEventLock(),x=!0}))}else i.addClass("active"),b=i,SDK.setEventLock(),x=!0})})},function(e,t,a){"use strict";a(3)},function(e,t){"use strict";$(function(){var e={bg:configData.bg,desc:configData.desc,title:configData.source.title,tgs:configData.tg,tgMoved:!1,sync:parent.window.h5SyncActions&&parent.window.h5SyncActions.isSync,getQueryString:function(e){var t=this.parseURL("http://www.example.com");return top.frames[0]&&top.frames[0].frameElement&&(t=this.parseURL(top.frames[0].frameElement.src)),t.params[e]},parseURL:function(e){var t=document.createElement("a");return t.href=e,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,query:t.search,params:function(){for(var e,a={},i=t.search.replace(/^\?/,"").split("&"),n=i.length,s=0;s<n;s++)i[s]&&(e=i[s].split("="),a[e[0]]=e[1]);return a}(),file:(t.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^\/])/,"/$1"),relative:(t.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:t.pathname.replace(/^\//,"").split("/")}},userType:function e(){var e="";return e=this.sync?window.frameElement.getAttribute("user_type"):"1"===this.getQueryString("role")?"tea":"stu"},setBg:function(){this.bg&&$(".container").css("background-image","url("+this.bg+")")},setDesc:function(){this.desc&&$(".desc").text(this.desc).show()},setTitle:function(){var e=this.title.length;e>0&&(e<=28?$(".title h3").css("font-size","0.72rem"):e<=42?$(".title h3").css("font-size","0.48rem"):$(".title h3").css("font-size","0.36rem"),$(".title h3").text(this.title),$(".title").show())},createTg:function(){var e="",t="";this.tgs.forEach(function(t,a){e+='\n        \t\t<li>\n\t\t\t\t    <div class="tg-list-tit clearfix">\n\t\t\t\t    <span class="fl tg-list-num">'+(a+1)+'</span>\n\t\t\t\t    <h3 class="fl">'+t.title+'</h3>\n\t\t\t\t    </div>\n\t\t\t\t    <p class="tg-list-des">'+t.content+"</p>\n\t\t\t    </li>\n        \t\t"}),t='<img src="image/tg.png" alt="" class="tg" style="display: none">\n            <div class="tg-content">\n                <ul>'+e+"</ul>\n            </div>\n            ",$(t).appendTo("#tg")},showTg:function(){this.tgs&&this.tgs.length>0&&(this.tgs[0].title.length>0||this.tgs[0].content.length>0)&&(this.createTg(),$(".tg").show())},showStu:function(){$(".tea").remove(),$(".stu").removeClass("hide")},showTea:function(){$(".stu").remove(),$(".tea").removeClass("hide"),this.showTg()},showMainPage:function(){var e=this.userType();switch(e){case"stu":this.showStu();break;default:this.showTea()}},bindEvents:function(){$("#tg").on("click",".tg",function(){this.tgMoved?(this.tgMoved=!1,$(".tg-content,.tg").removeClass("active")):(this.tgMoved=!0,$(".tg-content,.tg").addClass("active"))})},init:function(){this.setBg(),this.setDesc(),this.setTitle(),this.showMainPage(),this.bindEvents()}};e.init()})},function(e,t){"use strict";window.onload=function(){window.location.hostname;if(parent.window.h5SyncActions&&parent.window.h5SyncActions.isSync){var e=$(window.frameElement).attr("id"),t="h5_course_self_frame";"h5_course_cache_frame"!=e&&$(window.frameElement).attr("load_status","1"),e==t&&(parent.window.h5SyncActions.isPracticePage(!0),parent.window.h5SyncActions.isResultPage(!0))}}}]);